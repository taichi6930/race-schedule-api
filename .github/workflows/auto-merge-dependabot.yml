name: Auto Merge Dependabot PRs

on:
    pull_request:
        types:
            - opened
    check_suite:
        types:
            - completed

jobs:
    auto-merge:
        runs-on: ubuntu-latest
        if: github.actor == 'dependabot[bot]' && github.event.pull_request.state == 'open' && github.event.check_suite.conclusion == 'success'
        steps:
            - name: Checkout repository
                uses: actions/checkout@v4

            - name: Auto merge Dependabot PR
                uses: peter-evans/enable-pull-request-automerge@v2
                with:
                    token: ${{ secrets.GH_TOKEN }}
                    pull-request-number: ${{ github.event.pull_request.number }}
