## wrangler.toml（テンプレート）
## このファイルはCIで使用され、リポジトリにコミットされます。
## - CI（deploy/test）では `envsubst` により `${CF_D1_TEST_DB_ID}` / `${CF_D1_PROD_DB_ID}` が置換されます。
## - 実際のDB IDはここに保存しないでください。ローカルで必要な場合は `wrangler.effective.toml` を使用してください。

name = "race-schedule-api"
main = "src/index.ts"
compatibility_date = "2024-09-23"
compatibility_flags = ["nodejs_compat"]

[[d1_databases]]
binding = "DB"
database_name = "race-schedule-db"
database_id = "preview"
migrations_dir = "../db/migrations"

[env.production]
name = "race-schedule-prod"

[[env.production.d1_databases]]
binding = "DB"
database_name = "race-schedule-db-prod"
database_id = "${CF_D1_PROD_DB_ID}"
migrations_dir = "../db/migrations"

[env.development]
name = "race-schedule-dev"

[[env.development.d1_databases]]
binding = "DB"
database_name = "race-schedule-db-dev"
database_id = "${CF_D1_DEV_DB_ID}"
migrations_dir = "../db/migrations"

[env.test]
name = "race-schedule-test"

[[env.test.d1_databases]]
binding = "DB"
database_name = "race-schedule-db-test"
database_id = "${CF_D1_TEST_DB_ID}"
migrations_dir = "../db/migrations"
